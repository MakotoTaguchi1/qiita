---
title: データ分析入門してみた（1） - データサイエンス基礎
tags:
  - データ分析
  - データサイエンス
  - 検定
private: false
updated_at: '2023-04-05T05:00:40+09:00'
id: ced6415cccd966e2c731
organization_url_name: null
slide: false
ignorePublish: false
---
# 背景
これまで、クラウドインフラとしてAWSの経験がメインだったのですが、業務でGoogleCloud（GC）を扱うようになりました。
GCの強みはBigQueryなどデータ分析の領域にあると聞いているので、業務で担当するチャンスがあれば手を挙げられるようになっておきたいと思い、データサイエンスの学習を始めました。
今回はそこで得た知識の定着のため、記事にしました。
※　少し長くなったので、分野別で３つの記事に分けました


# 目次
1. [**データサイエンス基礎**](https://qiita.com/MAKOTO1995/items/ced6415cccd966e2c731#1-%E3%83%87%E3%83%BC%E3%82%BF%E3%82%B5%E3%82%A4%E3%82%A8%E3%83%B3%E3%82%B9%E5%9F%BA%E7%A4%8E)　← この記事で説明すること
1. [機械学習の基礎](https://qiita.com/MAKOTO1995/items/d4e966c716142f07489a#2-%E6%A9%9F%E6%A2%B0%E5%AD%A6%E7%BF%92%E3%81%AE%E5%9F%BA%E7%A4%8E)
1. [機械学習の応用](https://qiita.com/MAKOTO1995/items/d4e966c716142f07489a#3-%E6%A9%9F%E6%A2%B0%E5%AD%A6%E7%BF%92%E3%81%AE%E5%BF%9C%E7%94%A8)
1. [データ分析プロセス（CRISP-DM）](https://qiita.com/MAKOTO1995/items/59cbae8403729d32d14d#4-%E3%83%87%E3%83%BC%E3%82%BF%E5%88%86%E6%9E%90%E3%83%97%E3%83%AD%E3%82%BB%E3%82%B9crisp-dm)


# 1. データサイエンス基礎

## 検定とは
**統計的仮説検定**のことで、略して**検定**という。
検定は「最初に仮説を立て、実際に起こった結果を確率的に検証し、結論を導く」という手順で行い、背理法により結論を導く。

例えば、マーケティング活動の中でABテストの結果に差があったのかを判断するときに、検定を行うことで「その結果に有意な差があったのか」を検証でき、根拠なく判断することを回避することができる。
**帰無仮説（否定したい仮説）** を立て、それが正規分布の棄却域（ex: 両側5%）に含まれていたら**棄却**するという手順で検定する。

![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/577028/1969e6a1-9189-6863-22bc-6c9f4c74e8c8.png)


### t検定
下記のような、**母平均の検定**として用いられる。

- 連続値に対して２グループの比較を行う時（**1標本t検定**）
ex: 内容量200mlで販売されている、ある製品の内容量が本当に200mlであるかどうかの検定
- 比較するデータ間に対応関係があるか（**2標本t検定**）
ex: ある学校で行ったテストの点数が1組と2組とで差があるかどうかの検定

### カイ二乗検定
ビジネスシーンでよく使われる検定手法。一般的に**分布の乖離度**を測るもので、ABテストにて用いられることが多い。
- 分割表でまとめられカテゴライズされたデータに差があるのか比較
ex: メールマーケティングで、メールAとBの開封率に**有意差**があるかどうかの検定


## 相関関係と因果関係
### 擬似相関
例えば、年収と摂取カロリーに相関関係が見られるとする。しかしながらこの２変数の裏に「年齢」という隠れた因子（**交絡因子**）があり、これによってあたかも２変数に因果関係があるように見えることを**擬似相関**という。
２変数間に**相関関係はあっても因果関係があるとは限らないこと**に注意する。
※ ただし一般的に、因果関係を見つけるのは非常に困難なことが多いため、厳密に因果関係があることを示さずに相関関係のみでアクションを取ることもある。


#### 層別解析
**層別解析**とは、データをグループ別に分けて解析すること。
データ擬似相関があると疑われるとき、因果関係があるかどうかを判別するための手法。
（逆に、全体では相関関係は現れないが、グループ別に分析すると相関関係が洗われることもある）
今回の例でいうと、たとえ10代・20代・30代...というように層別化してみると、各層では年齢・摂取カロリーの間に相関がないことを発見できる可能性がある。

###### 層別解析のデメリット
- 層別するとサンプルサイズが減るため、各層での推定が不安定になる
- どのようにグループ化するかに、解析者の恣意性が入ってしまう
- データ収集の段階で、運良く因子が測定されていないと層別化できない（今回の例では、年齢がデータに紐づいていなければ層別化できなかった）


### 因果推論
**因果推論**とは、入力データと出力データから、その因果関係を統計的に推定していく考え方のこと。
例えば、新薬投与の効果を実証したいときに、投与ありの集団（**介入群**）と投与なしの集団（**対照群**）で有意差があるかを検証する際に用いる。
以下、因果推論に関連するワードを説明する。

#### ランダム化比較実験（RCT）
集団の各群への分割を割り付けと呼び、完全にランダムに割り付けを行って実験することを **ランダム化比較実験（RCT）** という。
**RCTによって、集団間の個人単位では色々な因子があっても、2つの群の分布は平均的に等しいことが期待できる**ようになるため、介入群と対照群の差は新薬の投与によるものであると言えるようになる。
つまり、検証したい原因となる変数以外の条件を排除し同じとする2グループの比較を行い、因果関係を検証する。

#### セレクションバイアス
因果推論のために割り付けをする際に起こりがちなバイアス。メジャーなものに下記がある。
1. 自己選択バイアス
臨床試験などで参加者を募集すると、健康に自身のある人が集まってきたり、疾患に関心の高い人が集まったりと、参加者の意志が入り込むことによって起こるバイアス。
2. 脱落バイアス
情報打ち切りバイアスとも呼ばれる。追跡期間がある研究では何かしらの理由で、被験者が研究対象から外れる（脱落）する場合がある。例えば新薬投与研究で、新薬の副作用で体調を崩した人が多数出た場合に、残った介入群と対照群で比較しても正しい因果関係が得られなくなる。


# 参考
- [データサイエンス大全](https://www.socym.co.jp/book/1402)
- [検定とは](https://bellcurve.jp/statistics/course/9309.html)
- [仮説検定における棄却域とは？](https://ai-trend.jp/basic-study/hypothesis-testing/rejection-region/#:~:text=%E4%BB%AE%E8%AA%AC%E6%A4%9C%E5%AE%9A%E3%81%AE%E4%B8%80%E8%88%AC%E7%9A%84,rejection%20region%EF%BC%89%E3%81%A8%E5%91%BC%E3%81%B3%E3%81%BE%E3%81%99%E3%80%82)
